# iOS + Backend ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆClaude Codeç”¨ï¼‰

ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ã€**iOS (SwiftUI) + Supabase + Next.js Backend** ã®æ§‹æˆã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã™ã‚‹éš›ã«ã€Claude CodeãŒåŠ¹ç‡çš„ã«ä½œæ¥­ã§ãã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã™ã€‚

---

## ğŸ“‹ ç‰¹å¾´

### ã‚³ã‚¢æ©Ÿèƒ½
- âœ… **iOS + Supabase + Backendçµ±åˆé–‹ç™º**ã«æœ€é©åŒ–ã•ã‚ŒãŸæ§‹æˆ
- âœ… **Clean Architecture**ã«ã‚ˆã‚‹iOSè¨­è¨ˆ
- âœ… **å‹å®‰å…¨æ€§**ã‚’é‡è¦–ï¼ˆSwift/TypeScriptå…±ã«`any`å‹ç¦æ­¢ï¼‰
- âœ… **è‡ªå‹•æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯**ï¼ˆè¦ä»¶å®šç¾©ã€DBã€å‹å®šç¾©ï¼‰
- âœ… **åŒ…æ‹¬çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**
- âœ… **Claude Code Hooks**ã«ã‚ˆã‚‹å“è³ªæ‹…ä¿

### ğŸš€ NEW! é«˜åº¦ãªæ©Ÿèƒ½
- âœ¨ **è‡ªå‹•ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ**: æ©Ÿèƒ½è¿½åŠ æ™‚ã®ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ
- ğŸ”§ **é–‹ç™ºç’°å¢ƒãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**: ä¾å­˜é–¢ä¿‚ã®è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- ğŸ¤– **CI/CDå®Œå‚™**: GitHub Actionsï¼ˆBackend/iOS/Docsï¼‰
- âœ… **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¤œè¨¼**: Phase 0å®Œäº†ãƒã‚§ãƒƒã‚¯è‡ªå‹•åŒ–
- ğŸ“ **ã‚³ãƒ¼ãƒ‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**: API/UI/ViewModelã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®Œå‚™
- ğŸ” **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³**: npm audit + secretsæ¤œå‡º
- ğŸ” **Supabase RLS**: Row Level Securityè¨­å®šæ¸ˆã¿

---

## ğŸ—ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### iOS
- **è¨€èª**: Swift
- **UI**: SwiftUI
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: Clean Architecture
- **BaaS**: Supabase (Auth, Database, Storage, Realtime)
- **ãƒ­ãƒ¼ã‚«ãƒ«DB**: SwiftDataï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œæ™‚ï¼‰
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: Supabase Swift SDK / URLSession

### Backendï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ï¼‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 14+ (App Router)
- **è¨€èª**: TypeScript
- **BaaS**: Supabase
- **ORM**: Prisma
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL (Supabase)
- **èªè¨¼**: Supabase Auth

---

## ğŸ›ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£é¸æŠè‚¢

ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯**ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

### ğŸ“± iOSã‚¢ãƒ—ãƒªã®ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•

#### 1ï¸âƒ£ ç›´æ¥Supabaseã«ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆæ¨å¥¨ï¼šã‚·ãƒ³ãƒ—ãƒ«ãªCRUDï¼‰

```
iOS App â†’ Supabase
```

**é©ã—ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®å–å¾—ãƒ»æ›´æ–°
- æŠ•ç¨¿ã®ä½œæˆãƒ»ä¸€è¦§å–å¾—
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ï¼ˆãƒãƒ£ãƒƒãƒˆç­‰ï¼‰
- å˜ç´”ãªCRUDæ“ä½œ

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãŒä½ã„
- ã‚¤ãƒ³ãƒ•ãƒ©ã‚³ã‚¹ãƒˆãŒä½ã„ï¼ˆBackendã‚µãƒ¼ãƒãƒ¼ä¸è¦ï¼‰
- ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…

**å®Ÿè£…ä¾‹**:
```swift
// iOS â†’ Supabaseï¼ˆç›´æ¥ï¼‰
let users: [User] = try await supabase
  .from("users")
  .select()
  .execute()
  .value
```

---

#### 2ï¸âƒ£ Next.js BackendçµŒç”±ã§ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆæ¨å¥¨ï¼šè¤‡é›‘ãªå‡¦ç†ï¼‰

```
iOS App â†’ Next.js Backend â†’ Supabase
```

**é©ã—ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹**:
- è¤‡é›‘ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒã‚¤ãƒ³ãƒˆè¨ˆç®—ã€ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- å¤–éƒ¨APIé€£æºï¼ˆStripeæ±ºæ¸ˆã€SendGridã€OpenAIï¼‰
- ç®¡ç†è€…æ©Ÿèƒ½ï¼ˆService Role Keyã‚’ä½¿ç”¨ã—ã¦RLSã‚’ãƒã‚¤ãƒ‘ã‚¹ï¼‰
- æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®åŠ å·¥ï¼ˆAPIã‚­ãƒ¼ç®¡ç†ã€æš—å·åŒ–å‡¦ç†ï¼‰
- ãƒãƒƒãƒå‡¦ç†ï¼ˆå®šæœŸçš„ãªãƒ‡ãƒ¼ã‚¿é›†è¨ˆã€é€šçŸ¥é€ä¿¡ï¼‰

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’Backendã«é›†ç´„
- ã‚»ã‚­ãƒ¥ã‚¢ãªå‡¦ç†ãŒå¯èƒ½
- å¤–éƒ¨APIé€£æºãŒå®¹æ˜“
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥åˆ¶å¾¡

**å®Ÿè£…ä¾‹**:
```swift
// iOS â†’ Next.js â†’ Supabase
let recommendation: Recommendation = try await networkService.request(
  endpoint: "/api/recommendations",
  method: .get
)
```

---

#### 3ï¸âƒ£ ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼ˆã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ¨å¥¨âœ¨ï¼‰

```
iOS App
  â”œâ”€ å˜ç´”ãªCRUD â†’ ç›´æ¥Supabase
  â””â”€ è¤‡é›‘ãªå‡¦ç† â†’ Next.js Backend â†’ Supabase
```

**å®Ÿè£…ä¾‹**:
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—: **iOS â†’ Supabaseï¼ˆç›´æ¥ï¼‰**
- âœ… æŠ•ç¨¿ã®ä½œæˆãƒ»å–å¾—: **iOS â†’ Supabaseï¼ˆç›´æ¥ï¼‰**
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ: **iOS â†’ Supabaseï¼ˆç›´æ¥ï¼‰**
- âœ… ãƒ—ãƒ¬ãƒŸã‚¢ãƒ èª²é‡‘å‡¦ç†: **iOS â†’ Next.js â†’ Stripe + Supabase**
- âœ… AIãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³: **iOS â†’ Next.js â†’ OpenAI + Supabase**
- âœ… ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰: **iOS â†’ Next.js â†’ Supabaseï¼ˆRLSãƒã‚¤ãƒ‘ã‚¹ï¼‰**

---

### ğŸ¯ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£é¸æŠã‚¬ã‚¤ãƒ‰

| è¦ä»¶ | æ¨å¥¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ | ç†ç”± |
|------|------------------|------|
| ã‚·ãƒ³ãƒ—ãƒ«ãªCRUDã‚¢ãƒ—ãƒª | iOS â†’ Supabaseï¼ˆç›´æ¥ï¼‰ | ã‚·ãƒ³ãƒ—ãƒ«ã€ä½ã‚³ã‚¹ãƒˆ |
| å¤–éƒ¨APIé€£æºãŒå¿…è¦ | iOS â†’ Next.js â†’ Supabase | ã‚»ã‚­ãƒ¥ã‚¢ã€æŸ”è»Ÿ |
| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ãŒå¿…è¦ | iOS â†’ Supabaseï¼ˆç›´æ¥ï¼‰ | ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· |
| è¤‡é›‘ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ | iOS â†’ Next.js â†’ Supabase | ãƒ­ã‚¸ãƒƒã‚¯é›†ç´„ |
| ç®¡ç†è€…æ©Ÿèƒ½ãŒå¿…è¦ | iOS â†’ Next.js â†’ Supabase | RLSãƒã‚¤ãƒ‘ã‚¹å¯èƒ½ |

---

### ğŸ’¡ BackendãŒä¸è¦ãªå ´åˆ

ã‚·ãƒ³ãƒ—ãƒ«ãªCRUDã‚¢ãƒ—ãƒªã®å ´åˆã€**Backendãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤**ã—ã¦ã‚‚OKã§ã™ï¼š

```bash
rm -rf backend
```

iOSã‹ã‚‰ç›´æ¥Supabaseã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€**Supabase RLS (Row Level Security)** ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç¢ºä¿ã§ãã¾ã™ã€‚

è©³ç´°ã¯ [docs/design/database/rls-security.md](docs/design/database/rls-security.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
project-root/
â”œâ”€â”€ ios/                         # iOSã‚¢ãƒ—ãƒªï¼ˆClean Architecture + Supabase SDKï¼‰
â”œâ”€â”€ backend/                     # Next.jsãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ï¼‰
â”œâ”€â”€ docs/                        # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ requirements/            # è¦ä»¶å®šç¾©ï¼ˆãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã®ã¿ï¼‰
â”‚   â”œâ”€â”€ design/                  # æŠ€è¡“è¨­è¨ˆ
â”‚   â”‚   â”œâ”€â”€ database/            # DBè¨­è¨ˆ + RLSè¨­è¨ˆ
â”‚   â”‚   â”œâ”€â”€ api/                 # APIè¨­è¨ˆ
â”‚   â”‚   â”œâ”€â”€ architecture/        # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
â”‚   â”‚   â””â”€â”€ ui-ux/               # UI/UXè¨­è¨ˆ
â”‚   â”œâ”€â”€ setup/                   # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰
â”‚   â”‚   â””â”€â”€ supabase-setup.md   # Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
â”‚   â””â”€â”€ project-management/      # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†
â”œâ”€â”€ .claude/                     # Claude Codeè¨­å®š
â”‚   â”œâ”€â”€ CLAUDE.md                # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â”‚   â”œâ”€â”€ settings.local.json      # Hookè¨­å®š
â”‚   â””â”€â”€ hooks/                   # è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ scripts/                     # ğŸš€ è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ setup-dev-env.sh         # é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
â”‚   â”œâ”€â”€ setup-ios-project.sh     # iOSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
â”‚   â”œâ”€â”€ generate-feature.sh      # æ©Ÿèƒ½è‡ªå‹•ç”Ÿæˆ
â”‚   â”œâ”€â”€ validate-project.sh      # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¤œè¨¼
â”‚   â”œâ”€â”€ sync-types.sh            # å‹åŒæœŸ
â”‚   â””â”€â”€ migrate-database.sh      # DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ templates/                   # ğŸš€ ã‚³ãƒ¼ãƒ‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ api-route.template.ts    # API Routeãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ middleware-auth.template.ts  # Supabaseèªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”‚   â”œâ”€â”€ swift-view.template.swift      # SwiftUI Viewãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â””â”€â”€ swift-viewmodel.template.swift # ViewModelãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â””â”€â”€ .github/workflows/           # ğŸš€ CI/CDè¨­å®š
    â”œâ”€â”€ backend-ci.yml           # Backendãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆï¼ˆSupabaseå¯¾å¿œï¼‰
    â”œâ”€â”€ ios-ci.yml               # iOSãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆ
    â””â”€â”€ docs-check.yml           # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
```

---

## ğŸš€ ä½¿ã„æ–¹

### ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```bash
# 1. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼
cp -r claude-code-template-ios-backend /path/to/your-new-project
cd /path/to/your-new-project

# 2. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
# https://supabase.com ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
# è©³ç´°: docs/setup/supabase-setup.md

# 3. é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰ï¼‰
./scripts/setup-dev-env.sh

# 4. Supabaseç’°å¢ƒå¤‰æ•°è¨­å®š
cp backend/.env.example backend/.env.local
# backend/.env.local ã‚’ç·¨é›†ã—ã¦Supabaseèªè¨¼æƒ…å ±ã‚’å…¥åŠ›

# 5. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
cd backend
npx prisma db push

# 6. Supabase RLSãƒãƒªã‚·ãƒ¼è¨­å®š
# backend/prisma/rls-policies.sql ã‚’Supabase SQL Editorã§å®Ÿè¡Œ

# 7. iOSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
./scripts/setup-ios-project.sh MyApp

# 8. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
# .claude/CLAUDE.md ã‚’ç·¨é›†

# 9. è¦ä»¶å®šç¾©ãƒ»è¨­è¨ˆæ›¸ã‚’ä½œæˆ
# docs/ é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†

# 10. è¨­è¨ˆå®Œäº†ãƒã‚§ãƒƒã‚¯
./scripts/validate-project.sh

# 11. æ–°æ©Ÿèƒ½ã‚’è‡ªå‹•ç”Ÿæˆã—ã¦å®Ÿè£…é–‹å§‹ï¼
./scripts/generate-feature.sh User crud
```

---

### è©³ç´°ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

å®Œå…¨ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰ã¯ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

1. **Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**: [docs/setup/supabase-setup.md](docs/setup/supabase-setup.md)
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
   - ç’°å¢ƒå¤‰æ•°å–å¾—
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
   - RLSãƒãƒªã‚·ãƒ¼è¨­å®š

2. **Backendã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**: [backend/README.md](backend/README.md)

3. **iOSã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**: [ios/README.md](ios/README.md)

---

## ğŸ” Claude Code Hooksã®æ©Ÿèƒ½

### 1. è¦ä»¶å®šç¾©æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯

**ãƒˆãƒªã‚¬ãƒ¼**: `docs/requirements/` ã¾ãŸã¯ `docs/design/database/` ã®ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†æ™‚

**ãƒã‚§ãƒƒã‚¯å†…å®¹**:
- âœ… å®Ÿè£…ã—ãªã„æ©Ÿèƒ½ãŒèª¤ã£ã¦è¨˜è¼‰ã•ã‚Œã¦ã„ãªã„ã‹
- âœ… ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½ã®å¿…é ˆç‰¹å…¸ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹
- âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã®è¨˜è¼‰ãŒã‚ã‚‹ã‹
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã¨è¦ä»¶ã®æ•´åˆæ€§

### 2. å‹åŒæœŸãƒã‚§ãƒƒã‚¯

**ãƒˆãƒªã‚¬ãƒ¼**: ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†æ™‚
- `backend/prisma/schema.prisma`
- `backend/types/index.ts`
- `ios/App/Domain/Entities/*.swift`
- `docs/design/database/overall-schema.md`

**ãƒã‚§ãƒƒã‚¯å†…å®¹**:
- âš ï¸ å‹å®šç¾©ãŒåŒæœŸã•ã‚Œã¦ã„ã‚‹ã‹è­¦å‘Šã‚’è¡¨ç¤º
- âš ï¸ Supabaseå›ºæœ‰ã®å‹å¤‰æ›ï¼ˆUUID â†’ Stringã€snake_case â†’ camelCaseï¼‰
- âš ï¸ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’è¡¨ç¤º

---

## ğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ§‹æˆã®åŸå‰‡

### docs/requirements/ - è¦ä»¶å®šç¾©
**å«ã‚ã‚‹ã¹ãå†…å®¹**:
- âœ… ãƒ“ã‚¸ãƒã‚¹è¦ä»¶
- âœ… æ©Ÿèƒ½ä»•æ§˜
- âœ… UI/UXä»•æ§˜
- âœ… ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«

**å«ã‚ãªã„ã¹ãå†…å®¹**:
- âŒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
- âŒ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®šç¾©
- âŒ å®Ÿè£…ã‚³ãƒ¼ãƒ‰

### docs/design/ - æŠ€è¡“è¨­è¨ˆ
**å«ã‚ã‚‹ã¹ãå†…å®¹**:
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒï¼ˆPrismaã€Supabaseï¼‰
- âœ… Supabase RLSãƒãƒªã‚·ãƒ¼
- âœ… API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®šç¾©
- âœ… ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³
- âœ… ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

---

## ğŸ¯ å‹å¤‰æ›´æ™‚ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‚„ãƒ¢ãƒ‡ãƒ«ã®å‹ã‚’å¤‰æ›´ã™ã‚‹éš›ã¯ã€**å¿…ãšä»¥ä¸‹ã®å…¨ã¦ã®ç®‡æ‰€ã‚’åŒæœŸã™ã‚‹**:

1. **Backend**:
   - [ ] `backend/prisma/schema.prisma`
   - [ ] `backend/types/index.ts`ï¼ˆsnake_case â‡” camelCaseå¤‰æ›ï¼‰
   - [ ] `backend/prisma/rls-policies.sql`ï¼ˆæ–°ãƒ†ãƒ¼ãƒ–ãƒ«ã®å ´åˆï¼‰
   - [ ] `npx prisma db push` å®Ÿè¡Œ
   - [ ] Supabase SQL Editorã§RLSãƒãƒªã‚·ãƒ¼å®Ÿè¡Œ

2. **iOS**:
   - [ ] `ios/App/Domain/Entities/*.swift`ï¼ˆUUID â†’ Stringå¤‰æ›ï¼‰

3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
   - [ ] `docs/design/database/overall-schema.md`
   - [ ] `docs/design/database/rls-security.md`ï¼ˆæ–°ãƒ†ãƒ¼ãƒ–ãƒ«ã®å ´åˆï¼‰

è©³ç´°ã¯ `./scripts/sync-types.sh` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ› ï¸ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### Swift (iOS)
- ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ: 2ã‚¹ãƒšãƒ¼ã‚¹
- å‘½å: camelCase (å¤‰æ•°ãƒ»é–¢æ•°), PascalCase (ã‚¯ãƒ©ã‚¹ãƒ»æ§‹é€ ä½“)
- `any`å‹ç¦æ­¢
- ãƒ•ã‚¡ã‚¤ãƒ«å: PascalCase.swift

### TypeScript (Backend)
- ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ: 2ã‚¹ãƒšãƒ¼ã‚¹
- å‘½å: camelCase (å¤‰æ•°ãƒ»é–¢æ•°), PascalCase (ã‚¯ãƒ©ã‚¹ãƒ»å‹)
- `any`å‹ç¦æ­¢
- ãƒ•ã‚¡ã‚¤ãƒ«å: kebab-case.ts
- ã‚»ãƒŸã‚³ãƒ­ãƒ³å¿…é ˆ

### Git
- ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯æ—¥æœ¬èªã§è¨˜è¿°

è©³ç´°ã¯ `docs/project-management/coding-standards.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ“¦ ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«

### Supabaseé–¢é€£
- `backend/prisma/rls-policies.sql` - Row Level Securityãƒãƒªã‚·ãƒ¼
- `backend/lib/auth/supabase.ts` - Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®š
- `backend/lib/errors/supabase-errors.ts` - Supabaseã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- `backend/middleware/supabase-auth.ts` - Supabaseèªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
- `ios/App/Data/DataSources/SupabaseClient.swift` - iOS Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- `docs/design/database/rls-security.md` - RLSè¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `docs/setup/supabase-setup.md` - Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

### è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- `scripts/setup-dev-env.sh` - é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- `scripts/setup-ios-project.sh` - iOSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- `scripts/generate-feature.sh` - æ©Ÿèƒ½è‡ªå‹•ç”Ÿæˆ
- `scripts/validate-project.sh` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¤œè¨¼ï¼ˆSupabaseãƒã‚§ãƒƒã‚¯å«ã‚€ï¼‰
- `scripts/sync-types.sh` - å‹åŒæœŸï¼ˆSupabaseå¯¾å¿œï¼‰
- `scripts/migrate-database.sh` - DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### Claude Codeè¨­å®š
- `.claude/CLAUDE.md` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
- `.claude/hooks/requirements-consistency-check.sh` - è¦ä»¶å®šç¾©æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
- `.claude/hooks/type-sync-check.sh` - å‹åŒæœŸãƒã‚§ãƒƒã‚¯

---

## âš ï¸ æ³¨æ„äº‹é …

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹å§‹æ™‚ã«å¿…ãšã‚„ã‚‹ã“ã¨

1. **Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ**
   - [docs/setup/supabase-setup.md](docs/setup/supabase-setup.md) ã«å¾“ã£ã¦Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ

2. **é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ**
   ```bash
   ./scripts/setup-dev-env.sh
   ```

3. **ç’°å¢ƒå¤‰æ•°è¨­å®š**
   ```bash
   cp backend/.env.example backend/.env.local
   # backend/.env.local ã‚’ç·¨é›†ã—ã¦Supabaseèªè¨¼æƒ…å ±ã‚’å…¥åŠ›
   ```

4. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**
   ```bash
   cd backend
   npx prisma db push
   ```

5. **Supabase RLSãƒãƒªã‚·ãƒ¼è¨­å®š**
   - Supabase SQL Editorã§ `backend/prisma/rls-policies.sql` ã‚’å®Ÿè¡Œ

6. **`.claude/CLAUDE.md` ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã€æ¦‚è¦ã€æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã‚’è¨˜å…¥

7. **Phase 0å®Œäº†å¾Œã®æ¤œè¨¼**
   ```bash
   ./scripts/validate-project.sh
   ```

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](docs/setup/supabase-setup.md) - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã‹ã‚‰ç’°å¢ƒå¤‰æ•°è¨­å®šã¾ã§

### è¨­è¨ˆãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](docs/design/architecture/system-architecture.md) - å…¨ä½“æ§‹æˆã€æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
- [RLSã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ](docs/design/database/rls-security.md) - Row Level Securityè©³ç´°
- [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ](docs/design/architecture/directory-structure.md) - iOS/Backend/docsã®æ§‹æˆ

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†
- [å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚ºè¨ˆç”»](docs/project-management/implementation-phases.md) - Phase 0ã€œ6ã®è©³ç´°ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
- [ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„](docs/project-management/coding-standards.md) - Swift/TypeScript/Gitã®è¦ç´„

### è‡ªå‹•åŒ–ãƒ»ãƒ„ãƒ¼ãƒ«
- [Hookèª¬æ˜æ›¸](.claude/hooks/README.md) - è‡ªå‹•æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ã®èª¬æ˜
- [ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª¬æ˜æ›¸](scripts/README.md) - è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½¿ã„æ–¹
- [ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆèª¬æ˜æ›¸](templates/README.md) - ã‚³ãƒ¼ãƒ‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½¿ã„æ–¹

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯è‡ªç”±ã«ä½¿ç”¨ãƒ»æ”¹å¤‰ã§ãã¾ã™ã€‚

---

## ğŸ’¡ Tips

### Claude Codeã§åŠ¹ç‡çš„ã«é–‹ç™ºã™ã‚‹ãŸã‚ã«

1. **Phase 0ï¼ˆè¨­è¨ˆãƒ•ã‚§ãƒ¼ã‚ºï¼‰ã‚’ä¸å¯§ã«**
   - è¦ä»¶å®šç¾©ã¨æŠ€è¡“è¨­è¨ˆã‚’æœ€åˆã«å®Œæˆã•ã›ã‚‹
   - Claudeã«å®Ÿè£…ã‚’ä¾é ¼ã™ã‚‹å‰ã«ã€ä½•ã‚’ä½œã‚‹ã‹ã‚’æ˜ç¢ºã«ã™ã‚‹

2. **Hook ã‚’ä¿¡é ¼ã™ã‚‹**
   - è¦ä»¶å®šç¾©ã¨è¨­è¨ˆæ›¸ã®æ•´åˆæ€§ã¯è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã•ã‚Œã‚‹
   - å‹å¤‰æ›´æ™‚ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã«å¾“ã†

3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å¸¸ã«æœ€æ–°ã«ä¿ã¤**
   - å®Ÿè£…ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’åŒæ™‚ã«æ›´æ–°ã™ã‚‹
   - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå”¯ä¸€ã®çœŸå®Ÿã®æƒ…å ±æº

4. **å‹å®‰å…¨æ€§ã‚’ä¿ã¤**
   - `any`å‹ã¯çµ¶å¯¾ã«ä½¿ã‚ãªã„
   - å‹å®šç¾©ã¯ Backend, iOS, ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…¨ã¦ã§åŒæœŸ
   - Supabaseå›ºæœ‰ã®å‹å¤‰æ›ï¼ˆUUID â†’ Stringã€snake_case â†’ camelCaseï¼‰ã«æ³¨æ„

5. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’é‡è¦–ã™ã‚‹**
   - Supabase RLSãƒãƒªã‚·ãƒ¼ã‚’å¿…ãšè¨­å®š
   - Service Role Keyã¯ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†ã—ã€å…¬é–‹ã—ãªã„
   - æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã¯BackendçµŒç”±ã§ã‚¢ã‚¯ã‚»ã‚¹

---

**ä½œæˆæ—¥**: 2025-12-04
**Supabaseå¯¾å¿œ**: 2025-12-04
